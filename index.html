<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quebra-cabe√ßa Educacional ‚Äì Humildoso</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f5f5f5;
  text-align:center;
  margin:0;
  padding:10px;
}
#controls{ margin:10px 0; }
select{ padding:8px; font-size:16px; }

#puzzle{
  margin:20px auto;
  display:grid;
  gap:2px;
}
.piece{
  border-radius:4px;
  cursor:grab;
  touch-action:none;
}
.piece.dragging{
  opacity:0.6;
  cursor:grabbing;
}
#message{
  display:none;
  font-size:20px;
  margin-top:20px;
  color:#2c7a7b;
  font-weight:bold;
}
</style>
</head>

<body>

<h2>Monte o quebra-cabe√ßa üéµ</h2>
<p>Arraste as pe√ßas para montar a imagem.</p>

<div id="controls">
  <label>Dificuldade: </label>
  <select id="level">
    <option value="3">F√°cil (12 pe√ßas)</option>
    <option value="4">M√©dio (24 pe√ßas)</option>
    <option value="6" selected>Dif√≠cil (48 pe√ßas)</option>
  </select>
</div>

<div id="puzzle"></div>

<div id="message">
‚ú® Esse √© o <strong>HUMILDOSO!</strong><br>
Aprender tamb√©m pode ser divertido üé∂
</div>

<script>
const puzzle = document.getElementById('puzzle');
const levelSelect = document.getElementById('level');
const message = document.getElementById('message');
let dragged = null;

function createPuzzle(cols){
  puzzle.innerHTML = "";
  message.style.display = "none";

  const rows = Math.round(48 / cols);
  const size = Math.min(window.innerWidth - 40, 360);
  puzzle.style.width = size + "px";
  puzzle.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  let pieces = [];

  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      const div = document.createElement('div');
      div.className = 'piece';
      div.style.width = size/cols + "px";
      div.style.height = size/cols + "px";
      div.style.backgroundImage = "url('Hmildoso.png')";
      div.style.backgroundSize = `${size}px ${size}px`;
      div.style.backgroundPosition = `-${x*(size/cols)}px -${y*(size/cols)}px`;
      div.dataset.correct = div.style.backgroundPosition;
      pieces.push(div);
    }
  }

  pieces.sort(()=>Math.random()-0.5);

  pieces.forEach(piece=>{
    piece.addEventListener('pointerdown', startDrag);
    piece.addEventListener('pointerup', endDrag);
    piece.addEventListener('pointerenter', overPiece);
    puzzle.appendChild(piece);
  });
}

function startDrag(e){
  dragged = e.target;
  dragged.classList.add('dragging');
  dragged.setPointerCapture(e.pointerId);
}

function endDrag(e){
  if(dragged){
    dragged.classList.remove('dragging');
    dragged.releasePointerCapture(e.pointerId);
    dragged = null;
    checkWin();
  }
}

function overPiece(e){
  if(dragged && dragged !== e.target){
    const temp = dragged.style.backgroundPosition;
    dragged.style.backgroundPosition = e.target.style.backgroundPosition;
    e.target.style.backgroundPosition = temp;
  }
}

function checkWin(){
  const pieces = document.querySelectorAll('.piece');
  let ok = true;
  pieces.forEach(p=>{
    if(p.style.backgroundPosition !== p.dataset.correct){
      ok = false;
    }
  });
  if(ok) message.style.display = "block";
}

levelSelect.addEventListener("change", ()=>createPuzzle(levelSelect.value));
createPuzzle(6);
</script>

</body>
</html>
